(function(){var a={isNullorUndefined:function(b){return b==undefined||b==null;},copy:function(c,b,d){if(this.isNullorUndefined(c)){return b;}for(var e in c){if(c[e]==undefined){continue;}if(!d&&b[e]==undefined){continue;}b[e]=c[e];}return b;},namespace:function(b,f){var g=f.split("/");var e=b;var c="";for(var d=0;d<g.length;d++){c=g[d];if(c==""){continue;}e[c]=e[c]||{};e=e[c];}return e;},define:function(e,b,d){var c=this.namespace(this,e);this.copy(b,c,true);if(d&&this.isNullorUndefined(c.prototype)){c.prototype={};}this.copy(d,c.prototype,true);},isArray:function(b){return b&&typeof(b)==="object"&&typeof(b.length)==="number"&&typeof(b.splice)==="function"&&!(b.propertyIsEnumerable("length"));}};window.chaozhou=a;})();;(function(){chaozhou.define("grid",{metro:function(d){var a,b;var c={rows:1,cols:1,width:0,height:0,rowSp:0,colSp:0,unit:"px",blocks:[]};c.rowCount=function(){if(chaozhou.isArray(this.rows)){return this.rows.length;}return this.rows;};c.colCount=function(){if(chaozhou.isArray(this.cols)){return this.cols.length;}return this.cols;};c.getAllSpace=function(e){if(e==="row"){return this.rowSp*(this.rowCount()-1);}return this.colSp*(this.colCount()-1);};c.rowSize=function(){if(a){return a;}var e=this.unit=="%"?100:this.height;a=(e-this.getAllSpace("row"))/this.rowCount();return a;};c.colSize=function(){if(b){return b;}var e=this.unit=="%"?100:this.width;b=(e-this.getAllSpace("col"))/this.colCount();return b;};c.getGridArray=function(k,h){var e=[];var j=h=="row"?this.rowSp:this.colSp;var g=h=="row"?this.rowSize():this.colSize();for(var f=0;f<k;f++){e.push(g*f+j*f);}return e;};c.setBlocks=function(){for(var e=0;e<this.blocks.length;e++){var f=this.blocks[e];f.top=this.tops[f.row-1];f.left=this.lefts[f.col-1];f.height=this.rowSize()*f.rowSpan+this.rowSp*(f.rowSpan-1);f.width=this.colSize()*f.colSpan+this.colSp*(f.colSpan-1);f.unit=this.unit;}};c.layout=function(){a=b=undefined;this.tops=this.getGridArray(this.rows,"row");this.lefts=this.getGridArray(this.cols,"col");this.setBlocks();};return chaozhou.copy(d,c);}});})();;(function(){chaozhou.define("grid",{block:function(a){var b={row:1,col:1,rowSpan:1,colSpan:1,unit:"px",};return chaozhou.copy(a,b);}});})();;(function(){jQuery.fn.grid=function(e,d){var j=d||"div";var g=chaozhou.copy(e,{width:this.width(),height:this.height(),},true);var n=this;var a=chaozhou.grid.metro(g);var l=n.children("div");l.each(function(){var b=$(this);a.blocks.push({row:b.attr("row")||1,col:b.attr("col")||1,rowSpan:b.attr("rowspan")||1,colSpan:b.attr("colspan")||1});});a.layout();var f=n.css("position");if(f!="absolute"&&f!="relative"){n.attr("style","position:relative");}for(var h=0;h<a.blocks.length;h++){var m=a.blocks[h];var k=$(l[h]);var c="position:absolute;top:"+m.top+m.unit+";left:"+m.left+m.unit+";width:"+m.width+m.unit+";height:"+m.height+m.unit+";"+k.attr("style");k.attr("style",c);}};})();;;
